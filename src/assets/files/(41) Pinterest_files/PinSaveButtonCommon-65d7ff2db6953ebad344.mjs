(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinSaveButtonCommon",22,23,"PinRepEditButtonCommon"],{"0BOE":function(e,t,n){n.d(t,"a",(function(){return o}));const r={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},i=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=r[e.charAt(n)]||e.charAt(n);return t},o=(e,t,n="name")=>{const r=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),r=e.split(" ");let o=0;for(let s=0;s<r.length;s+=1)(i(r[s]).includes(n[o])||r[s].includes(n[o]))&&(o+=1);return o===n.length})(e[n].toLowerCase(),r))}},"2WXK":function(e,t,n){var r=n("q1tI");let i=null,o=!1,s=0;const a=()=>{i&&clearTimeout(i),o=!0,i=setTimeout(()=>{o=!1},100)};t.a=()=>{const[e,t]=Object(r.useState)(!1),n=Object(r.useRef)(null);Object(r.useEffect)(()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{n.current&&clearTimeout(n.current),s-=1,s||window.removeEventListener("scroll",a)}),[]);const i=e=>{n.current&&clearTimeout(n.current),n.current=e&&o?setTimeout(()=>i(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(r.useRef)({onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1)}).current}}},"2qKt":function(e,t,n){var r=n("nKUr"),i=n("q1tI"),o=n("/MKj"),s=n("Y+p1"),a=n.n(s),c=(n("17x9"),n("Vzit")),l=n("vh5K"),d=n("pLLR"),u=n("ANjH");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1};t.a=(e,t={},n)=>s=>{const b=function(e){return t=>({experience:t.experiences.eligibleExperiences[e],experiencesMulti:t.experiences.experiencesMulti?t.experiences.experiencesMulti[e]:void 0})}(e);n={...h,...n};const f=function(e,t,n=!0,o=!0,s=!1,d){var u,h;return h=u=class extends i.Component{constructor(e){super(e),p(this,"state",{extraContext:void 0}),p(this,"setExtraContextState",e=>{a()(this.state.extraContext,e)||this.setState({extraContext:e})})}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(n,r){const{dispatch:i,experience:o}=this.props;let s=r.extraContext,l=this.state.extraContext||t||{};"function"==typeof t&&(s=t(n,r.extraContext||{}),l=t(this.props,this.state.extraContext||{})),l&&Object.keys(l).length>0&&!a()(s,l)&&i(Object(c.c)(e,l)),!o||n.experience&&o.id===n.experience.id||i(Object(c.k)(e,l))}componentWillUnmount(){const{dispatch:t}=this.props;t(Object(c.m)(e))}dispatchPlacementMount(){const{dispatch:n}=this.props,r="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},i=s&&null!=r&&r.advertiser_id?{advertiserId:r.advertiser_id}:void 0;n(Object(c.l)(e,r,i))}render(){const{experience:e,experiencesMulti:t}=this.props,n={[s?"advertiserExperience":"experience"]:Object(l.e)(e)?e:null};return Object(r.jsx)(d,{...this.props,setPlacementExtraContext:this.setExtraContextState,...n,experiencesMulti:t})}},p(u,"displayName",`withPlacement(${d.displayName||d.name||"Component"})`),h}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,n.isAdvertiserPlacement,s);return Object(u.compose)(d.e,Object(o.connect)(b))(f)}},"5FNA":function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("qtKf"),i=n("Pqnw"),o=n("Wer7");const s=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],a={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:n,username:r})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:r,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},c=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),l=e=>s.reduce((t,n)=>{const s=[Object(i.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(t=>{[!0,!1].forEach(r=>{s.push(Object(o.f)(a.name,a.options({username:e,boardOrder:n,mixPublicSecret:t,filterStories:r})))})}),t.concat(s)},[])},"5uyJ":function(e,t,n){n.d(t,"a",(function(){return r}));const r={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},"82UD":function(e,t,n){var r=n("nKUr"),i=n("q1tI"),o=n("/MKj"),s=n("T+9/"),a=n("ajUs"),c=n("ou9u"),l=n("hFNL"),d=n("qD10"),u=n("yKES"),p=n("5uyJ"),h=n("n6mq");const b={overlay:{__style:{backgroundColor:"#000"}}};function f(e){const{pin:{id:t,images:n,title:o,videos:s,video_status_message:a}}=e,c=a||{},l=n&&n["236x"],f=s&&s.video_list[p.a.V_HLSV4],{duration:m}=f||{};return Object(r.jsx)(i.Fragment,{children:Object(r.jsx)(h.i,{children:Object(r.jsxs)(d.a,{to:"/pin/"+t,children:[Object(r.jsxs)(h.e,{overflow:"hidden",position:"relative",rounding:2,children:[l&&Object(r.jsx)(h.x,{alt:o||"",color:"lightGray",naturalHeight:l.height,naturalWidth:l.width,src:l.url}),!!m&&Object(r.jsx)(h.e,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:Object(r.jsx)(u.a,{duration:m})}),Object(r.jsx)(h.e,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:b.overlay}),Object(r.jsxs)(h.e,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[Object(r.jsx)(h.u,{color:"white",overflow:"normal",size:"sm",children:c.title}),Object(r.jsx)(h.e,{marginTop:4,children:Object(r.jsx)(h.W,{color:"white",size:"md",overflow:"normal",children:c.subtitle})})]})]}),Object(r.jsx)(h.e,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:Object(r.jsx)(h.e,{flex:"grow",children:o&&Object(r.jsx)(h.e,{paddingY:1,children:Object(r.jsx)(h.W,{inline:!0,size:"md",weight:"bold",children:o})})})})]})})})}var m=n("Y8Sn"),g=n("vpxy"),j=n("0nTG");t.a=Object(o.connect)((function({pins:e},{pin:t,pinId:n}){return{reduxPin:e[n]||t}}),()=>({}))((function({reduxPin:e,trackingParameters:t,...n}){const d=Object(o.useSelector)(({location:e})=>e),u=Object(a.a)(e,d),p=Object(c.a)(e),h=!!(p&&p.url&&p.height&&p.width)||void 0,b=p&&e.videos?e.videos.id:void 0,[x,v]=Object(i.useState)(!1),O=Object(i.useCallback)(()=>v(!0),[]),_=Object(i.useCallback)(()=>v(!1),[]),{componentType:y,contextLogData:S,impressionAuxFields:w,slotIndex:I,viewData:C,viewParameter:E,viewType:P}=t;return Object(r.jsx)(s.a,{componentType:y,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(l.b)(window)}:{},...S,...Object(j.f)(e,S)},impressionAuxFields:{...w||{},isNativeVideoAndWatchable:h,videoIdStr:b,clientTrackingParams:u||(e.tracking_params||"")+"-0",imageURL:e.images&&e.images["236x"].url,richTypes:Object(j.e)(e)},impressionType:"Pin",isPaused:!x,loggingId:e.id,slotIndex:I,viewData:C,viewParameter:E,viewType:P,children:Object(m.h)(e)?Object(r.jsx)(f,{pin:e}):Object(r.jsx)(g.a,{...n,debugImpressionState:x?"started":"paused",onError:_,onLoad:O,pin:e,trackingParameters:{componentType:y,contextLogData:S,slotIndex:I,viewParameter:E,viewType:P}})})}))},"8cMa":function(e,t,n){var r=n("nKUr"),i=n("Ye/N"),o=n("n6mq");t.a=function({type:e}){const t={group:{accessibilityLabel:i.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:i.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:i.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return Object(r.jsx)(o.e,{marginStart:1,children:Object(r.jsx)(o.e,{marginStart:2,children:"sections"===e||"sectionsInline"===e?Object(r.jsx)(o.v,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):Object(r.jsx)(o.v,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})})})}},"9QW3":function(e,t,n){n.d(t,"a",(function(){return s}));const r={row:0,section:0},i={row:-1,section:-1},o=()=>{};class s{constructor(e){this.index=Object.assign({},r),this.sections=e,this.updateCallback=o,this.selectItem=o}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===i.row&&t===i.section?this.index=Object.assign({},r):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===i.row&&t===i.section)this.index=Object.assign({},r);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},i),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},AAEI:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("/MKj"),i=n("ANjH"),o=n("vh5K"),s=n("Vzit");function a(e){const t=Object(r.useDispatch)(),n=Object(r.useSelector)(e=>e.experiences.eligibleExperiences),a=Object(r.useSelector)(e=>e.experiences.mountedPlacements);return{experienceForPlacement:e?Object(o.c)(n,a,e):null,...Object(i.bindActionCreators)({completeExperience:s.a,dismissExperience:s.b,fetchAllExperiences:s.d,fetchExperienceForPlacement:s.c,triggerExperimentsForPlacement:s.k,viewExperience:s.j},t)}}},DzJC:function(e,t,n){var r=n("sEfC"),i=n("GoyQ");e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:o,maxWait:t,trailing:s})}},IBrh:function(e,t,n){n.d(t,"a",(function(){return c}));var r=n("nKUr"),i=n("q1tI"),o=n("mEMi"),s=(n("9QW3"),n("n6mq"));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(e){super(e),a(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),a(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),a(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)}),a(this,"handleMouseEnter",e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)}),a(this,"handleMouseLeave",()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),a(this,"renderItems",(e,t)=>{const{renderItem:n}=this.props,{selectedIndex:i}=this.state,{row:o,section:a}=i||{},{customProps:c={},items:l,renderItem:d}=e,{isDisabled:u=(e=>!1)}=c,p=t===a,h=d||n;return h&&l.map((e,n)=>{const i=u(e),a={section:t,row:n},l=p&&n===o;return Object(r.jsx)(s.e,{"data-test-id":"board-selection",ref:!i&&l?this.setSelectedItemRef:null,children:i?h({item:e,hovered:l,sectionProps:c}):Object(r.jsx)(s.V,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(a),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:h({item:e,hovered:l,sectionProps:c})})},n)})}),a(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,n)=>Object(r.jsxs)(s.e,{children:[e&&e(t,n),this.renderItems(t,n)]},n))});const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),r=n.top,i=n.bottom,o=t.getBoundingClientRect(),s=o.top;i>=o.bottom?e.scrollIntoView(!1):r<=s&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return Object(r.jsx)(o.a,{fetchMore:n,children:({setRef:n,onScroll:i})=>Object(r.jsx)(s.e,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},MNxV:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("nKUr"),i=n("XRfM"),o=n("pLLR");const s=i.b.DateFormatType;t.b=({dateFormatType:e,useUTC:t=!0,value:n})=>Object(r.jsx)(o.b,{children:r=>i.b.formatDate(r.locale,n,e,t)})},NdQN:function(e,t,n){var r=n("nKUr"),i=n("q1tI"),o=n("JW66"),s=n("Ye/N"),a=(n("9QW3"),n("n6mq"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),c(this,"setInputRef",e=>{e&&(this._input=e)}),c(this,"handleKeyDown",e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case o.a.KeyCode.ENTER:case o.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case o.a.KeyCode.UP:e.preventDefault(),n.prev();break;case o.a.KeyCode.DOWN:e.preventDefault(),n.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return Object(r.jsx)("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"},children:Object(r.jsx)(a.L,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:s.a._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}t.a=l},NdXn:function(e,t,n){function r(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}n.d(t,"a",(function(){return r}))},NjDU:function(e,t,n){function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function i(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function s(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c}));const a=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),c=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}})},PNKV:function(e,t,n){},Pqnw:function(e,t,n){function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",(function(){return r}))},WnNx:function(e,t,n){function r(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function i(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},Wrea:function(e,t,n){n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("Wer7");const i=(e,t)=>n=>n(Object(r.a)("BoardResource",{board_id:e,field_set_key:t})),o=e=>i(e,"pin_count"),s=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),a=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),c=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},ZE2w:function(e,t,n){n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("4dcN"),i=n("eOdZ");const o="collaborator_approve_invite";function s(e,t){return i.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function a(e,t){return i.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>i.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{r.a.trackEvent(o,"success")}).catch(()=>r.a.trackEvent(o,"error"))}function l(e,t,n){return t=>{const{invited_user:r,status:o,board:{id:s}}=e;return i.a.create("accepted"===o?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:s,field_set_key:"boardEdit",invited_user_id:r.id}).callDelete({showError:!1})}}},c50B:function(e,t,n){n.d(t,"o",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"m",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"q",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return j})),n.d(t,"s",(function(){return x})),n.d(t,"p",(function(){return v})),n.d(t,"k",(function(){return O})),n.d(t,"r",(function(){return _})),n.d(t,"t",(function(){return y}));const r=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,r)=>{const i=t[e];i&&(n[r]=i)}),n.join("")};function i(e){return function(t,n){const r=[];t&&/\S/.test(t)||r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}const o=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function s(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(o)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function a(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function c(e){return function(t,n){const i=r(t.trim()),o=[];i&&""!==i&&i.length<2&&o.push(e.ageTooShortString);const s=Math.floor(parseInt(i,10));""===i||/^\d+$/.test(i)&&s>0&&s<300||o.push(e.invalidAgeString);const a={errors:o,warnings:[]};return n&&n(a),a}}function l(e){return function(t,n){const r=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),i=[],o=!1!==e.checkLength&&r.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!o||i.push(e.message);const s={errors:i,warnings:[]};return n&&n(s),s}}function d(e){return function(t,n){const i=/^\d+$/,o=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(i)&&o.push(e.message));const s={errors:o,warnings:[]};return n&&n(s),s}}function u(e){return function(t,n){const i=/^[\d\ -]+$/,o=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(i)&&o.push(e.message));const s={errors:o,warnings:[]};return n&&n(s),s}}function p(e){return function(t,n){const r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function h(e){return function(t,n){const r=[];(e.should_trim||!1)&&(t=t&&t.trim());const i=t.length;e.min&&i<e.min?r.push(e.minErrorString):e.max&&i>e.max&&r.push(e.maxErrorString);const o={errors:r,warnings:[]};return n&&n(o),o}}function b(e){return function(t,n){const r=[];t!==(e&&e.targetValue)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function f(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<=e.value&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function m(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<e.value&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function g(e){return function(t,n){const r=[];/^[\040-\176]*$/.test(t)||r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function j(e){return function(t,n){const r=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,i=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(r)&&(t=t&&t.trim(),i.push(e.message));const o={errors:i,warnings:[]};return n&&n(o),o}}function x(e){return function(t,n){t=t&&t.trim();const r=[],i=new Date(t);t&&!i.getTime()&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function v(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function O(e){return function(t,n){const r=[];e.pattern.test(t)||r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function _(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}function y(e,t){let n="";return t.some(t=>{const r=t(e);return r.errors.length>0&&(n=r.errors[0],!0)}),n}},dMCU:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),i=n("/MKj"),o=n("v/Q4"),s=n("aOj9");function a(e){const t=t=>{const n=Object(i.useDispatch)(),{isAuth:a,isLimitedLogin:c}=Object(o.a)(),l=Object(s.e)(),d=!a||c?e=>e=>{e&&e.stopPropagation(),l()}:e=>e;return Object(r.jsx)(e,{authAction:d,dispatch:n,isAuth:a,isLimitedLogin:c,...t})};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,t}},eyRb:function(e,t,n){function r(e){return{type:"UPDATE_PIN_ACTIONS",payload:e}}function i(){return{type:"COMPLETE_APP_INSTALL"}}function o(){return{type:"COMPLETE_PIN_SAVE"}}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},gONw:function(e,t,n){var r=n("nKUr"),i=n("q1tI"),o=n("n6mq");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"onHover",()=>{this.setState({isHovering:!0})}),s(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:i}=this.props;return i?Object(r.jsxs)(o.e,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[Object(r.jsx)(o.e,{children:Object(r.jsx)(o.C,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?Object(r.jsx)(o.x,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):Object(r.jsx)(o.e,{color:"lightGray",height:40,width:40})})}),Object(r.jsx)(o.e,{padding:2,children:Object(r.jsx)(o.u,{size:"sm",children:e})})]}):Object(r.jsxs)(o.e,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[Object(r.jsx)(o.e,{children:Object(r.jsx)(o.v,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),Object(r.jsx)(o.e,{marginStart:3,children:Object(r.jsx)(o.W,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var c=n("Ye/N"),l=n("w70y"),d=n("U4JR"),u=n("seP0");t.a=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:s,minHeight:p,onBoardSelected:h})=>{const[b,f]=Object(i.useState)(-1),m=Object(u.c)(),{data:g=[],error:j,isLoaded:x}=Object(l.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),v=(O=g,Object(i.useMemo)(()=>O&&O.length?O.map(e=>e.title):[],[O]));var O;Object(i.useEffect)(()=>{x&&t&&m&&(j?m.error():m.stop())},[x]);const _=()=>{f(-1)},y=(t,n)=>{const i=b===n;return Object(r.jsx)("li",{children:Object(r.jsx)(o.V,{onMouseEnter:()=>(e=>{f(e)})(n),onMouseLeave:_,onTap:()=>(e=>{h(v[e],!1),Object(d.b)(101,{component:13025,element:23})})(n),children:Object(r.jsx)(a,{selected:i,name:t,inFlyoutExp:e,image:s})})},n)};return x?v&&v.length?e?Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:v.map(y)})}):t?Object(r.jsxs)(o.e,{children:[Object(r.jsx)(o.e,{marginTop:5,marginStart:6,marginBottom:3,children:Object(r.jsx)(o.W,{children:c.a._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),Object(r.jsx)("ul",{children:v.map(y)})]}):Object(r.jsxs)(o.e,{children:[Object(r.jsx)(o.e,{marginTop:2,paddingX:5,children:Object(r.jsx)(o.W,{children:c.a._("Suggested board names")})}),Object(r.jsx)("ul",{children:v.map(y)})]}):null:Object(r.jsx)(o.e,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:p||"",children:Object(r.jsx)(o.P,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},gdcG:function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("nKUr"),i=n("2WXK");function o(e){return function(t){const{isHovering:n,hoverHandlers:o}=Object(i.a)();return Object(r.jsx)(e,{...t,hoverHandlers:o,isHovering:n})}}},guDk:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n("Ye/N");const i=()=>r.a._("We can’t complete this action because you’re in ‘read-only’ mode. Switch to ‘edit mode’ to make changes.","adminMode.writeOnlyAction.errorMessage","A toast message indicating that the user is trying to perform a write action in read-only mode."),o=[25],s=e=>!!e&&("string"==typeof e?e===i():!!e.code&&o.includes(e.code)),a=e=>e&&o.includes(e.code)?i():null},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return a}));var r=n("nKUr"),i=n("Ye/N"),o=n("dtqy"),s=n("n6mq");function a({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:a,shouldUseLegoStyles:c,onDelete:l}){const d=Object(r.jsx)(s.w,{accessibilityLabel:i.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return c?Object(r.jsx)(s.f,{size:"lg",color:"gray",text:i.a._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:l,accessibilityLabel:i.a._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?Object(r.jsx)("div",{style:{...a||{}},children:d}):d}t.default=Object(o.a)(a)},jdx6:function(e,t,n){n.d(t,"b",(function(){return c}));var r=n("nKUr"),i=n("8cMa"),o=n("JW66"),s=n("Ye/N"),a=n("n6mq");function c(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,i,o)=>{if(n.length>0&&e&&e.length){const s=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(Object(r.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(s,s+e.length)},o),i)}return[i]},[]):t}t.a=function(e){const{disabled:t,item:n,isSection:l,isSelectMode:d,isWithinSectionPicker:u,saveState:p,searchQuery:h,selected:b}=e,f=l?null:n,m=l?n:null,g=m&&m.title||f&&f.name||"";let j="",x=!1,v="",O=0;f&&({image_cover_url:j,is_collaborative:x,privacy:v,section_count:O=0}=f);const _=c(h,g),y=v===o.a.BoardPrivacy.SECRET,S=!t&&(b||!!p),w=!u&&O>0,I=O>0?"boardWithSection":"boardWithoutSection",C=d?s.a._("Select","Board select button label","Board select button label"):s.a._("Save","Pin save button label","Pin save button label");return Object(r.jsxs)(a.e,{alignItems:"center",color:S?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":I,children:[f?Object(r.jsx)(a.e,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:j?Object(r.jsx)(a.x,{src:j,alt:g,fit:"cover",naturalWidth:1,naturalHeight:1}):Object(r.jsx)("span",{})}):Object(r.jsx)(a.e,{height:36,paddingX:2}),Object(r.jsxs)(a.e,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow",children:[Object(r.jsx)(a.W,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold",children:_}),(w||!S)&&Object(r.jsxs)(a.e,{alignItems:"center",display:"flex",children:[y&&Object(r.jsx)(i.a,{type:"secret"}),x&&Object(r.jsx)(i.a,{type:"group"}),w&&Object(r.jsx)(i.a,{type:"sections"})]}),!w&&S&&!p&&Object(r.jsxs)(a.e,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:[!d&&Object(r.jsx)(a.e,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}},children:Object(r.jsx)(a.v,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})}),Object(r.jsx)(a.W,{color:"white",overflow:"normal",size:"md",weight:"bold",children:C})]}),!w&&S&&"loading"===p&&Object(r.jsx)(a.e,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:Object(r.jsx)(a.P,{accessibilityLabel:s.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},mEMi:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("q1tI"),i=n("DzJC"),o=n.n(i);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends r.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",o()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},r)=>e+t+(r?r(t):2*t)>n)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},oN2T:function(e,t,n){n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return j})),n.d(t,"m",(function(){return x})),n.d(t,"h",(function(){return O})),n.d(t,"d",(function(){return _})),n.d(t,"a",(function(){return y})),n.d(t,"l",(function(){return S})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return I})),n.d(t,"f",(function(){return C}));var r=n("4dcN"),i=n("Pqnw"),o=n("7w6Q"),s=n("eOdZ"),a=n("KFEb"),c=n("5FNA"),l=n("NjDU"),d=n("Wer7");const u="board_create",p="board_delete",h="board_edit";function b(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function f(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}function m(){return(e,t)=>{const{viewer:n}=t();n.isAuth&&Object(c.b)(n.username).forEach(t=>{e(t)})}}function g(e,t){const n={...e};return i=>(i({type:"BOARD_CREATE",payload:{board:e}}),s.a.create("BoardResource",n).callCreate().then(e=>{r.a.trackEvent(u,"success");const o=e.resource_response.data;return o&&(i(m()),null!=t&&t.isFBC||i(f(n,o))),o}).catch(e=>{throw r.a.trackEvent(u,"error"),e}))}function j(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function x(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},i={board_id:e.id,name:e.name,description:e.description,category:e.category,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...n};return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:i}}),s.a.create("BoardResource",i).callUpdate().then(n=>{r.a.trackEvent(h,"success");const o=n&&n.resource_response&&n.resource_response.data||e;t(j(i,o))}).catch(e=>{throw r.a.trackEvent(h,"error"),e})}}function v(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function O(e){return(t,n)=>{const i=n().boards.content[e],{pin_count:o}=i,{id:a}=i.owner;return t({type:"BOARD_DELETE",payload:{boardId:e}}),s.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{r.a.trackEvent(p,"error"),t(v(e)),t(Object(l.b)({userId:a,increment:-o}))}).catch(e=>{throw r.a.trackEvent(p,"error"),e})}}function _(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function y(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),s.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function S(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),s.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function w(e,t){return n=>s.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(v(e)),n(b(t,"pin_count")),n(Object(i.a)(a.a.BOARD_SECTIONS,t))]))}function I(e,t){return n=>s.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response){return n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}const r=e.resource_response.data||{},i=(r.model||{}).custom_properties||{},{campaign_id:s="unknown"}=i,a=r.display_data||{},c={isSocialSeasonalBoard:!!r.display_data,socialHeaderBgImage:a.header_image,socialHeaderBgColor:a.header_background_color,textIconColor:a.text_icon_color};return o.a.increment(`web.seasonal_board.${s}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:c})})}function C(){return e=>e({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}},oRM1:function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("q1tI"),i=n("zQfT");function o({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:o,resourceOptions:s,value:a}){const c=Object(i.a)({allowSearchOnMount:e,resourceName:o,resourceOptions:s,value:a});return Object(r.useEffect)(()=>{c.length&&n(c)},[c]),t||null}},ou9u:function(e,t,n){function r(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}n.d(t,"a",(function(){return r}))},qyR9:function(e,t,n){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return j}));var r=n("nKUr"),i=n("q1tI"),o=n("jdx6"),s=n("gONw"),a=n("Ye/N"),c=n("gdcG"),l=n("n6mq");var d=Object(c.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:i,hasHoverState:o,hoverHandlers:s,name:c,onClick:d}=e,u=c||t||a.a._("Create board");return Object(r.jsx)(l.V,{onMouseEnter:s.onMouseOver,onMouseLeave:s.onMouseLeave,onTap:d,children:Object(r.jsxs)(l.e,{alignItems:"center",color:o&&n?"lightGray":"white",display:"flex",flex:i?"shrink":"none",height:64,width:"100%",children:[Object(r.jsx)(l.e,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton",children:Object(r.jsx)(l.v,{accessibilityLabel:a.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})}),c?Object(r.jsx)(l.e,{margin:1,children:Object(r.jsxs)(l.W,{inline:!0,overflow:"normal",children:[" ",a.a._("Create: ")," "]})}):null,Object(r.jsxs)(l.W,{align:"center",inline:!0,truncate:!0,weight:"bold",children:[" ",u," "]})]})})})),u=n("9QW3"),p=n("NdQN"),h=n("IBrh"),b=n("seP0");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=2;class g extends i.Component{constructor(...e){super(...e),f(this,"state",{searchQuery:""}),f(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),f(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),f(this,"renderSectionHeader",(e,t)=>e.title?Object(r.jsxs)(l.e,{children:[t>0&&Object(r.jsx)(l.o,{}),Object(r.jsx)(l.e,{paddingX:3,paddingY:1,children:Object(r.jsx)(l.W,{size:"md",children:e.title})})]}):null),f(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:i,isSelectMode:s,disabledRowId:a}=this.props,{searchQuery:c}=this.state,{inSectionSelection:l=!1}=n,d=i&&i.board===e.id?i&&i.state:null,u="board_section"===e.type;return Object(r.jsx)(o.a,{isSelectMode:s,disabled:e.id===a&&l,item:e,isSection:u,isWithinSectionPicker:l,saveState:d,searchQuery:c,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:i,isLoaded:o,onCreate:c,pinId:b}=this.props;if(o){const{searchQuery:o}=this.state,a=i(o);return this.indexManager=new u.a(a.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),Object(r.jsxs)(l.e,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&Object(r.jsxs)(l.e,{children:[Object(r.jsx)(l.e,{paddingX:3,marginBottom:4,marginTop:1,children:Object(r.jsx)(p.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:o})}),Object(r.jsx)(l.o,{})]}),Object(r.jsx)(h.a,{disabled:!!e,grow:!n&&!o,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:a}),Object(r.jsx)(l.o,{}),c&&Object(r.jsx)(d,{buttonLabel:t,hasHoverState:!0,name:o,onClick:()=>c(o)}),n&&c&&b&&Object(r.jsx)(s.a,{onBoardSelected:c,pinId:b})]})}return Object(r.jsx)(l.e,{paddingY:5,children:Object(r.jsx)(l.P,{accessibilityLabel:a.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function j(e){const t=Object(b.c)();return Object(r.jsx)(g,{...e,boardPickerStopwatch:t})}},rO08:function(e,t,n){n.r(t),n.d(t,"PinSaveButton",(function(){return S}));var r=n("nKUr"),i=n("q1tI"),o=n("/MKj"),s=n("Ye/N"),a=n("TgLd"),c=n("rYoy"),l=n("dMCU"),d=n("2qKt"),u=n("n6mq"),p=n("eyRb"),h=n("0nTG"),b=n("lm6u"),f=n("B6Tf"),m=n("y9Ij"),g=n("seP0"),j=n("ANjH"),x=n("xjIv"),v=n("EC67");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _=Object(i.lazy)(()=>n.e("FirstPinCreateCommon").then(n.bind(null,"kj35"))),y=[500639,11022];class S extends i.Component{constructor(e){super(e),O(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel()}),O(this,"setCompletionPromise",e=>{this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(()=>{this.handleRepinHideAndToggle()})}),O(this,"_repinCompletionPromise",null),O(this,"handleRepinHideAndToggle",()=>{this.setState({isRepinModalOpen:!1});const{onToggleModal:e}=this.props;e&&e(!1)}),O(this,"handleSaveButtonClick",({shouldStopEventPropagation:e=!0}={shouldStopEventPropagation:!0})=>this.props.authAction(t=>{t&&(t.preventDefault(),e&&t.stopPropagation());const{onClickCallback:n,onToggleModal:r,oneTapSave:i,boardPickerStopwatch:o,pathname:s}=this.props;n&&n(),i?i.saved||"function"!=typeof i.save||i.save():(o&&(o.start(),Object(g.b)(o,s)),r&&r(!0),this.setState({isRepinModalOpen:this.props.isAuth}))})),O(this,"handleUnsaved",()=>{const{unsave:e,pin:t}=this.props;e(t.id)}),O(this,"handleBoardEdited",({boardId:e,title:t,url:n})=>{const{pin:r,save:i}=this.props;i(r.id,e,t,n)}),O(this,"handleSavedButtonClick",()=>{const{history:e,pin:t,pinSavedInfo:n,viewerId:r}=this.props;let i;t.pinner.id===r?i=t.board.url:n&&(i=n.url),i&&e.push(i)}),O(this,"saveButtonRef",Object(i.createRef)()),O(this,"renderPinToBoardRepin",()=>{const{isCloseupPin:e,onToggleModal:t,pin:n}=this.props,{isFPE:i,isRepinModalOpen:o}=this.state;return o&&i?this.renderFPE():i?null:Object(r.jsx)(b.a,{action:"repin",additionalCreateFields:{is_stl_pin:Object(h.i)(n)},onClose:this.handleRepinHideAndToggle,setCompletionPromise:this.setCompletionPromise,shouldShowToast:!0,onToggleModal:t,pin:n,children:({dismissModal:t,displaySuccessAnimation:i,handleAbort:s,handleNewBoardAnimationCompletion:a,handleSocialConnectSet:c,handleSaveToBoard:l,newPin:d,updateDescription:u,modalTitle:p,setModalTitle:h})=>Object(r.jsx)(f.d,{dismissModal:t,displaySuccessAnimation:i,handleAbort:s,handleNewBoardAnimationCompletion:a,handleSaveToBoard:l,handleSocialConnectSet:c,isCloseupPin:e,isInModal:!0,modalTitle:p,newPin:d,pin:n,pwtAuxData:{pin_create_method:"repin"},setModalTitle:h,shouldRenderContent:o,updateDescription:u})})});const{experience:t,showRepinOnInitialRender:n}=e;this.state={isFPE:!!t&&y.includes(t.experience_id),isRepinModalOpen:n||!1}}componentDidMount(){const{onMount:e}=this.props;e&&e()}isFPERemoved(e){const{isFPE:t}=this.state,{experience:n}=e;return t&&(!n||!y.includes(n.experience_id))}renderFPE(){const{completePinSave:e,experience:t,pin:n}=this.props;return Object(r.jsx)(a.b,{accessibilityModalLabel:s.a._("Create board","Accessible create board education modal label","Accessible create board education modal label"),heading:s.a._("Create board","Create board education modal label","Create board education modal label"),onDismiss:this.handleRepinHideAndToggle,size:"lg",children:Object(r.jsx)(u.e,{dangerouslySetInlineStyle:{__style:{marginBottom:64}},children:Object(r.jsx)(c.a,{children:Object(r.jsx)(i.StrictMode,{children:Object(r.jsx)(_,{anchorRef:this.saveButtonRef.current,experience:t,isInModal:!0,onClose:this.handleRepinHideAndToggle,onComplete:e,pin:n,pwtAuxData:{pin_create_method:"repin"}})})})})})}render(){const{iconOnly:e,isCloseupPin:t,oneTapSave:n,onToggleModal:o,pin:s,renderPinSaveTooltip:a,renderSavedStatus:c,variant:l,viewerId:d,viewParameter:p}=this.props,h=!!(s.pinner.id===d||s.saved||s.savedInfo||"controlled"===(null==n?void 0:n.type)&&n.saved),b="controlled"===(null==n?void 0:n.type)?"controlled":"classic";return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsxs)(u.e,{ref:this.saveButtonRef,children:[t?Object(r.jsx)(m.a,{iconOnly:e,isCloseupPin:t,isPulsarDisplayed:!this.state.isRepinModalOpen,onClick:this.handleSaveButtonClick({shouldStopEventPropagation:!1}),onSavedClick:this.handleSavedButtonClick,saveButtonType:b,saved:h,variant:l}):Object(r.jsx)(m.b,{carouselData:s.carousel_data,iconOnly:e,isCloseupPin:t,onBoardUpdated:this.handleBoardEdited,onClick:this.handleSaveButtonClick({shouldStopEventPropagation:!0}),onSavedClick:this.handleSavedButtonClick,onToggleModal:o,onUnsaved:this.handleUnsaved,renderSavedStatus:c,saveButtonType:b,saved:h,savedInfo:s.savedInfo,variant:l,viewParameter:p}),this.renderPinToBoardRepin()]}),!!a&&this.saveButtonRef.current&&a(this.saveButtonRef.current)]})}}O(S,"defaultProps",{anchorString:""}),t.default=Object(j.compose)(Object(o.connect)((function({pins:e,viewer:t},{pin:n}){return{email:t.isAuth?t.email:void 0,isAuth:t.isAuth,pinSavedInfo:e[n.id]&&e[n.id].savedInfo,viewerId:t.isAuth?t.id:""}}),(function(e){return{completePinSave:()=>e(Object(p.b)()),save:(t,n,r,i)=>e(Object(x.a)(t,n,r,i)),unsave:t=>e(Object(x.b)(t))}})),l.a,Object(d.a)(33),v.k)((function(e){const t=Object(g.c)(),{pathname:n}=Object(v.h)();return Object(r.jsx)(S,{...e,boardPickerStopwatch:t,pathname:n})}))},rVUJ:function(e,t,n){var r,i,o,s=n("nKUr"),a=n("q1tI"),c=n("/MKj"),l=n("BcvT"),d=n("n6mq");class u extends a.Component{renderPulsar(){const{anchor:e,handleComplete:t,zIndex:n}=this.props;return Object(s.jsx)(l.a,{anchor:e,onTouch:t,zIndex:n})}renderFlyout(){const{anchor:e,overflow:t,tooltip:n,handleDismiss:r,handleComplete:i}=this.props;if(!n)return null;const{cancelButtonText:o,confirmButtonText:a,mainText:c,idealDirection:l="down"}=n,u=o&&r&&a&&i;return Object(s.jsx)(d.s,{anchor:e,color:"blue",idealDirection:l,onDismiss:r,shouldFocus:!1,showCaret:!0,size:"flexible",children:Object(s.jsxs)(d.e,{maxWidth:284,padding:3,width:"max-content",children:[Object(s.jsx)(d.W,{color:"white",overflow:t,weight:"bold",children:c}),u?Object(s.jsxs)(d.e,{marginTop:2,display:"flex",alignItems:"center",children:[Object(s.jsx)(d.e,{column:6,marginEnd:1,children:Object(s.jsx)(d.f,{color:"transparentWhiteText",onClick:e=>r(e),size:"md",text:String(o)})}),Object(s.jsx)(d.e,{column:6,children:Object(s.jsx)(d.f,{color:"white",size:"md",text:String(a),onClick:i})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}o={overflow:"breakWord"},(i="defaultProps")in(r=u)?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o;var p=n("NdXn"),h=n("AAEI"),b=n("gC5q");t.a=({anchor:e,anchorElementRef:t,children:n,containerBoxConfig:r,experience:i,isHidden:o,onCompleteClick:l,overflow:f,zIndex:m})=>{var g;const j=(({anchor:e,anchorExperiences:t,passedExperience:n})=>n||(t?t[e]:null))({anchor:e,anchorExperiences:Object(c.useSelector)(({experiences:e})=>null==e?void 0:e.anchorExperiences),passedExperience:i}),x=Object(h.a)(null==j?void 0:j.placement_id),v=(null==j||null===(g=j.display_data)||void 0===g?void 0:g.delay)||0,[O,_]=Object(a.useState)(!!v);if(Object(a.useEffect)(()=>{if(v>0&&O){const e=setTimeout(()=>{_(!1)});return()=>clearTimeout(e)}return()=>{}},[v,O]),Object(a.useEffect)(()=>{!O&&j&&x.viewExperience(j.placement_id,j.experience_id)},[O,j]),!j||O||o)return a.Children.only(n);const y=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),Object(b.a)(p.a,!0)(t)})(j);return Object(s.jsxs)(d.e,{position:"relative",height:null==r?void 0:r.height,display:null==r?void 0:r.display,children:[Object(s.jsx)(d.V,{onMouseEnter:()=>{var e;null!==(e=j.display_data)&&void 0!==e&&e.complete_on_hover&&x.completeExperience(j.placement_id,j.experience_id)},onTap:()=>{l&&l(),y.skipComplete||x.completeExperience(j.placement_id,j.experience_id)},children:a.Children.only(n)}),Object(s.jsx)(u,{anchor:t||null,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),x.dismissExperience(j.placement_id,j.experience_id)},overflow:f,pulserOnly:!!y.pulserOnly,tooltip:y.tooltip,tooltipOnly:!!y.tooltipOnly,zIndex:m})]})}},seP0:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n("FZ8N"),i=n("F4HH");const{Provider:o,useHook:s}=Object(i.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:r.b?1:.1}),a=(e,t)=>{let n="unknown";null!=t&&t.includes("pin/")?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},c=o,l=s},uyxo:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("nKUr"),i=n("jHGc"),o=n("n6mq");function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:s,onEditSubmit:a,onToggleModal:c,pinId:l,variant:d,viewParameter:u,shouldUseLegoStyles:p}=e,h="pin"===d?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return Object(r.jsxs)(o.e,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===d?"100%":void 0,paddingX:"closeup"!==d||p?void 0:2,marginStart:"pin"===d?-1:void 0,marginEnd:"pin"===d?-1:void 0,children:[t&&Object(r.jsx)(o.e,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),Object(r.jsx)(o.e,{paddingX:1,flex:"none",marginStart:"auto",children:Object(r.jsx)(i.default,{component:0,onDelete:s,onSubmit:a,pinId:l,onToggleModal:c,viewParameter:u,carouselSlotCurrentIndex:n,style:h,shouldUseLegoStyles:p,useLegoStyles:"pin"===d})})]})}},y9Ij:function(e,t,n){n.d(t,"a",(function(){return h}));var r=n("nKUr"),i=n("q1tI"),o=n("/MKj"),s=(n("PNKV"),n("TSYQ")),a=n.n(s),c=n("rVUJ"),l=n("Ye/N"),d=n("uyxo"),u=n("n6mq");const p=Object(i.memo)(Object(i.forwardRef)(({carouselData:e,disabled:t=!1,iconOnly:n,isCloseupPin:i,onBoardUpdated:o,onClick:s,onSavedClick:c,onToggleModal:p,onUnsaved:h,renderSavedStatus:b,saveButtonType:f="classic",saved:m,savedInfo:g,variant:j="classic",viewParameter:x},v)=>m&&"controlled"===f?Object(r.jsx)(u.f,{disabled:!0,text:l.a._("Saved"),size:"sm"}):!i&&g&&b&&h&&o&&"classic"===f?Object(r.jsx)(d.a,{currentCarouselIndex:e&&e.index,onDeleteSavedState:h,onEditSubmit:o,onToggleModal:p,pinId:g.localPinId,variant:"pin",viewParameter:x,children:b()}):m&&"classic"===f&&i?Object(r.jsx)(u.f,{accessibilityLabel:l.a._("Saved button","saveButton.saved.label","Saved state label on save button"),text:l.a._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:c}):n?Object(r.jsx)("div",{ref:v,"data-test-id":"SaveButton",children:Object(r.jsx)(u.w,{accessibilityLabel:l.a._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>s(e),iconColor:"darkGray"})}):Object(r.jsx)(u.e,{display:i?void 0:"flex",justifyContent:"end",children:Object(r.jsx)("div",{ref:v,className:a()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===j}),"data-test-id":"SaveButton",onClick:t?void 0:s,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),s(e))},role:"button",tabIndex:"0",children:Object(r.jsx)("div",{className:a()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===j}),children:Object(r.jsx)(u.e,{alignItems:"center",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",children:Object(r.jsx)(u.W,{color:t?"gray":"white",size:"lego"===j?"sm":"md",weight:"bold",children:Object(r.jsx)("span",{className:a()("SaveButton__label",{"SaveButton__label--lego":"lego"===j}),children:l.a._("Save","Pin save button label","Pin save button label")})})})})})}))),h=({isPulsarDisplayed:e,...t})=>{const[n,s]=Object(i.useState)(null),a=Object(o.useSelector)(({experiences:e})=>{const t=null==e?void 0:e.eligibleExperiences[12];return 501370===(null==t?void 0:t.experience_id)?t:void 0}),l=Object(i.useCallback)(e=>{s(e)},[n]);return Object(r.jsx)(c.a,{anchor:".PinActionBar .repin.pinActionBarButton",anchorElementRef:n,experience:a,isHidden:!e,children:Object(r.jsx)(p,{ref:l,...t})})};t.b=p},yKES:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),i=n("Ye/N"),o=n("US8k"),s=n("n6mq");function a({duration:e}){return Object(r.jsxs)(s.e,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[Object(r.jsx)(s.v,{accessibilityLabel:i.a._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),Object(r.jsx)(s.e,{marginStart:1,children:Object(r.jsx)(s.W,{color:"white",size:"sm",truncate:!0,children:Object(o.a)(e)})})]})}},zQfT:function(e,t,n){n.d(t,"a",(function(){return l}));var r=n("q1tI");const i=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},o=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};o.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new i(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},o.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},o.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},o.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},o.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=o,a=n("eOdZ");function c({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},r=a.a.create(e,n),i=new s,o=()=>{r.abort()};return async function(e){const t=i.get(e);if(t){const n=t.items;if(n&&n.length){o();return{hint:t.hint,items:n,term:e}}}return e.length>=0?(async e=>{if(r.isCalling()){var t;if(e===(null===(t=r.options)||void 0===t?void 0:t.term))return;o()}const{bookmarks:n,...s}=r.options||{};r.options={...s,term:e};const a=(await r.callGet({showError:!1})).resource_response.data,c=a.items,l=a.hint||{},d={hint:l,items:c};return i.set(e,d),{term:e,items:c,hint:l}})(e):{hint:{},items:[],term:e}}}function l({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:i}){const o=Object(r.useRef)(!1),s=Object(r.useRef)({}),[a,l]=Object(r.useState)([]),d=function({resourceName:e,resourceOptions:t}){const n=Object(r.useRef)();return n.current||(n.current=c({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n});return Object(r.useEffect)(()=>{(async()=>{if(null!=i&&(e||o.current))if(i in s.current)l(s.current[i]);else try{const e=await d(i);if(e){const{items:t}=e;s.current[i]=t,l(t)}}catch(t){if("Resource call aborted"===t)return;throw t}o.current||(o.current=!0)})()},[i]),a}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinSaveButtonCommon-65d7ff2db6953ebad344.mjs.map